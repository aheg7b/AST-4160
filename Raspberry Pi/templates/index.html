<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ESP32 Sensor Monitor</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>ESP32 Sensor Monitor</h1>

  <div id="menu">
    <!-- Data field checkboxes -->
    <label><input type="checkbox" data-field="ip" checked /> IP</label>
    <label><input type="checkbox" data-field="mac" checked /> MAC</label>
    <label><input type="checkbox" data-field="name" checked /> Name</label>
    <label><input type="checkbox" data-field="lastConnection" checked /> Last Connection</label>
    <label><input type="checkbox" data-field="ping" checked /> Ping</label>
    <label><input type="checkbox" data-field="tempC" checked /> Temp (째C)</label>
    <label><input type="checkbox" data-field="tempF" checked /> Temp (째F)</label>
    <label><input type="checkbox" data-field="mic" checked /> Mic</label>
    <label><input type="checkbox" data-field="x" checked /> X</label>
    <label><input type="checkbox" data-field="y" checked /> Y</label>
    <label><input type="checkbox" data-field="z" checked /> Z</label>

    <!-- Sliders -->
    <label>
      Refresh rate (ms):
      <input type="range" id="refreshRateSlider" min="100" max="5000" step="100" value="1000" />
      <span id="refreshRateValue">1000</span>
    </label>

    <label>
      Offline threshold (ms):
      <input type="range" id="offlineThresholdSlider" min="1" max="5000" step="1" value="3000" />
      <span id="offlineThresholdValue">3000</span>
    </label>
  </div>

  <!-- Table to display sensor data -->
  <table>
    <thead>
      <tr>
        <th>IP</th>
        <th>MAC</th>
        <th>Name</th>
        <th>Last Connection</th>
        <th>Ping</th>
        <th>Temp (째C)</th>
        <th>Temp (째F)</th>
        <th>Mic</th>
        <th>X</th>
        <th>Y</th>
        <th>Z</th>
        <th>Rename</th>
        <th>3D Model</th>
        <th>Record CSV</th>
      </tr>
    </thead>
    <tbody id="deviceTableBody">
      <!-- Dynamically filled by script.js -->
    </tbody>
  </table>

  <!-- Modal for 3D model viewer -->
  <div id="modelModal" class="modal" style="display:none;">
    <div class="modal-content popup-content">
      <span id="closeModal" style="cursor:pointer; position:absolute; top:10px; right:20px; font-size:24px;">&times;</span>
      <div id="modelContainer"></div>
      <button id="resetModelBtn" style="position:absolute; bottom:10px; left:50%; transform: translateX(-50%);">Reset Position</button>
    </div>
  </div>

  <div id="loading">Loading sensor data...</div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.151.3/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.151.3/examples/js/loaders/GLTFLoader.js"></script>
  <script src="script.js"></script>
</body>
</html>
